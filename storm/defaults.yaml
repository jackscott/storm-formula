{% load_yaml as rawmap %}
Ubuntu:
  user: storm
  prefix: /usr/local
  config_dir: /etc/storm
  log_dir: /var/log/storm
  build_dir: /usr/local/src

  supervisor_slots: 4
  supervisor_start_port: 6700
  
  version: "0.10.0"
  name: "apache-storm-%s"
  alt_name: "storm"
  mirror_url: "http://www.apache.org/dyn/closer.lua/storm/%(name)s/%(name)s.tar.gz"
  source_url: "http://mirror.cogentco.com/pub/apache/storm/%(name)s/%(name)s.tar.gz"
  source_hash: "http://www.us.apache.org/dist/storm/%(name)s/%(name)s.tar.gz.md5"

  dependencies:
    zmq:
      name: "zeromq-%s"
      version: 3.2.5
      prefix: /usr/local
      source_url: "http://download.zeromq.org/zeromq-%(version)s.tar.gz"
      alt_name: zeromq
      
    jzmq:
      name: "jzmq-%s"
      version: 3.1.0
      prefix: /usr/local
      source_url: "https://github.com/zeromq/jzmq/archive/v%(version)s.tar.gz"
      alt_name: jzmq
    
    libsodium:
      name: "libsodium-%s"
      version: 1.0.7
      prefix: /usr/local
      source_url: "https://download.libsodium.org/libsodium/releases/libsodium-%(version)s.tar.gz"
      alt_name: libsodium

  config:
    nimbus.host: "localhost"
    nimbus.childopts: "-Xmx1024m"
    nimbus.thrift.port: 6627
    nimbus.thrift.threads: 64
    
    ui.host: 0.0.0.0
    ui.port: 8080
    ui.childopts: "-Xmx1024m"

    storm.local.dir: "/tmp/storm-local"
    storm.zookeeper.servers: []
    storm.zookeeper.port: 2181
    storm.zookeeper.root: "/storm"
    drpc.port: 3772
      
    worker.threads: 64
    transactional.zookeeper.root: "/transactional"
    
    worker.childopts: >-
      "-Xmx2600m
      -Xms2600m
      -Xss256k
      -XX:MaxPermSize=128m
      -XX:PermSize=96m
      -XX:NewSize=1000m
      -XX:MaxNewSize=1000m
      -XX:MaxTenuringThreshold=1
      -XX:SurvivorRatio=6
      -XX:+PrintGCDetails
      -Xloggc:artifacts/gc.log
      -XX:+PrintGCDateStamps
      -XX:+PrintGCTimeStamps
      -XX:+UseGCLogFileRotation
      -XX:NumberOfGCLogFiles=10
      -XX:GCLogFileSize=1M
      -XX:+HeapDumpOnOutOfMemoryError
      -XX:HeapDumpPath=artifacts/heapdump"

{% endload %}
